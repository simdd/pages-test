"use strict";(()=>{var e={};e.id=252,e.ids=[252],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6482:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>P,routeModule:()=>y,serverHooks:()=>_,staticGenerationAsyncStorage:()=>E});var s={};n.r(s),n.d(s,{POST:()=>p});var o=n(9303),r=n(8716),a=n(670),i=n(7070);async function p(e){try{let{model:t,messages:n}=await e.json();if(!t||!n)return i.NextResponse.json({error:"Missing model or messages"},{status:400});if("deepseek-chat"===t||"deepseek-reasoner"===t)return await u(n,t);if("gpt-4o-mini"===t)return await l(n);if("gemini-flash"===t)return await c(n);if("nebius-studio"===t)return await m(n);else if("claude"===t)return await d(n);else if("gemini-flash-lite"===t)return await g(n);else if("gemini-2-5-flash-lite"===t)return await f(n);else return i.NextResponse.json({error:"Unknown model"},{status:400})}catch(e){return i.NextResponse.json({error:e.message||"Internal error"},{status:500})}}async function u(e,t){let n=process.env.DEEPSEEK_API_KEY;if(!n)return i.NextResponse.json({error:"DEEPSEEK_API_KEY not set in environment"},{status:500});let s="deepseek-reasoner"===t?"deepseek-reasoner":"deepseek-chat",o={model:s,messages:e,stream:!0};return"deepseek-chat"===s&&(o.temperature=.7),h(await fetch("https://api.deepseek.com/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(o)}))}async function l(e){let t=process.env.OPENAI_API_KEY;return t?h(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-4o-mini",messages:e,stream:!0})})):i.NextResponse.json({error:"OPENAI_API_KEY not set in environment"},{status:500})}async function c(e){let t=process.env.GEMINI_API_KEY;if(!t)return i.NextResponse.json({error:"GEMINI_API_KEY not set in environment"},{status:500});let n=e.filter(e=>"system"!==e.role).map(e=>({role:"user"===e.role?"user":"model",parts:[{text:e.content}]}));return h(await fetch("https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent?alt=sse",{method:"POST",headers:{"Content-Type":"application/json","X-goog-api-key":t},body:JSON.stringify({contents:n,generationConfig:{temperature:1,topP:1,maxOutputTokens:1024},safetySettings:[]})}))}async function m(e){let t=process.env.NEBIUS_API_KEY;return t?h(await fetch("https://api.studio.nebius.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"deepseek-ai/DeepSeek-V3-0324",store:!1,messages:e,max_tokens:1024,temperature:1,top_p:1,n:1,stream:!0,presence_penalty:0,frequency_penalty:0})})):i.NextResponse.json({error:"NEBIUS_API_KEY not set in environment"},{status:500})}async function d(e){let t=process.env.CLAUDE_API_KEY;if(!t)return i.NextResponse.json({error:"CLAUDE_API_KEY not set in environment"},{status:500});let n=e.map(e=>({role:e.role,content:e.content}));return h(await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":t,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:"claude-3-7-sonnet-20250219",messages:n,max_tokens:2048,stream:!0})}))}async function g(e){let t=process.env.GEMINI_API_KEY;if(!t)return i.NextResponse.json({error:"GEMINI_API_KEY not set in environment"},{status:500});let n=e.filter(e=>"system"!==e.role).map(e=>({role:"user"===e.role?"user":"model",parts:[{text:e.content}]})),s=await fetch("https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash-lite:generateContent?alt=sse",{method:"POST",headers:{"Content-Type":"application/json","X-goog-api-key":t},body:JSON.stringify({contents:n,generationConfig:{temperature:.7,topP:.9,maxOutputTokens:500},safetySettings:[]})});if(!s.ok){let e=await s.text();return i.NextResponse.json({error:e},{status:s.status})}return h(s)}async function f(e){let t=process.env.GEMINI_API_KEY;if(!t)return i.NextResponse.json({error:"GEMINI_API_KEY not set in environment"},{status:500});let n=e.filter(e=>"system"!==e.role).map(e=>({role:"user"===e.role?"user":"model",parts:[{text:e.content}]})),s=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2-5-flash-lite:generateContent?alt=sse",{method:"POST",headers:{"Content-Type":"application/json","X-goog-api-key":t},body:JSON.stringify({contents:n,generationConfig:{temperature:.7,topP:.9,maxOutputTokens:500},safetySettings:[]})});if(!s.ok){let e=await s.text();return i.NextResponse.json({error:e},{status:s.status})}return h(s)}function h(e){return new i.NextResponse(e.body,{status:e.status,headers:{"Content-Type":e.headers.get("Content-Type")||"application/octet-stream","Cache-Control":"no-store"}})}let y=new o.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/ai/route",pathname:"/api/ai",filename:"route",bundlePath:"app/api/ai/route"},resolvedPagePath:"/Users/peilujie/Downloads/ai-chatbot-starter-1/app/api/ai/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:P,staticGenerationAsyncStorage:E,serverHooks:_}=y,v="/api/ai/route";function x(){return(0,a.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:E})}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[276,972],()=>n(6482));module.exports=s})();